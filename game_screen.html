
<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Игровой экран</title>

   
<style>
    * { margin:0; padding:0; box-sizing:border-box; }
    html, body {
        height: 100%;
        overflow-x: hidden;
        -webkit-overflow-scrolling: touch; /* плавный скролл на iOS */
    }
    body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        background: #f5f7ff;
        width: 375px;
        min-height: 812px;
        margin: 0 auto;
        position: relative;
    }

    .screen { display: none; }
    .screen.active { display: block; }

    /* Главный экран — теперь прокручивается */
    #main-screen {
        background: linear-gradient(to bottom, #f8f9ff 0%, #e8edff 100%);
        min-height: 812px;
        padding-bottom: 100px; /* место под фиксированную навигацию */
        position: relative;
    }

    /* Контейнер с прокруткой */
    .scroll-container {
        padding: 0 16px;
        padding-top: 20px;
        min-height: calc(812px - 84px);
    }

    /* Шапка */
    .header {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 16px;
    }
    .avatar {
        width: 44px; height: 44px; background: #e86aff; border-radius: 50%;
        display: flex; align-items: center; justify-content: center;
        color: white; font-size: 24px; font-weight: bold;
    }
    .user-name { font-size: 18px; font-weight: 600; }


    .balance-text { font-size: 14px; color: #888; }
    .balance-amount { font-size: 24px; font-weight: 700; }
   

    /* Нижняя навигация */
    .nav-item {
        text-align: center;
        cursor: pointer;
    }
    .nav-item img { width: 34px; height: 34px; }
    .nav-label { font-size: 10px; color: #999; margin-top: 4px; }
    .nav-item.active .nav-label { color: #000; font-weight: 600; }

    /* Попапы */
    .overlay {
        position: fixed;
        top: 0; left: 0; right: 0; bottom: 0;
        background: rgba(0,0,0,0.65);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 200;
    }
    .popup {
        background: white;
        border-radius: 24px;
        padding: 32px 24px;
        text-align: center;
        max-width: 320px;
        box-shadow: 0 20px 40px rgba(0,0,0,0.2);
    }
    .popup h2 { margin-bottom: 16px; font-size: 22px; }
    .close-popup {
        margin-top: 24px;
        padding: 12px 40px;
        background: #ff5c8a;
        color: white;
        border: none;
        border-radius: 30px;
        font-size: 16px;
        cursor: pointer;
    }

   .nav {
    position: fixed;
    bottom: 0; left: auto; right: auto;
    height: 84px;
    background: white;
    border-top: 1px solid #eee;
    display: flex;
    justify-content: space-around;
    align-items: center;
    width: 375px;
    z-index: 100;
    padding-bottom: 10px; /* чуть приподнимает, чтобы не прилипало к краю */
}

.nav-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 4px;
    cursor: pointer;
    flex: 1;
}
/* Убираем любой цветной фильтр у иконок */
.nav-item img {
    width: 28px;
    height: 28px;
    filter: none !important; /* на всякий случай, чтобы точно не было фильтра */
}

/* Только текст становится жирным у активной кнопки */
.nav-item.active .nav-label {
    color: #000;
    font-weight: 700; /* жирнее */
}

/* У обычных кнопок текст серый и обычный */
.nav-label {
    font-size: 10px;
    color: #999;
    margin-top: 4px;
    font-weight: 400;
}
</style>
</head>
<body>

 
<!-- Игровой экран -->
<!-- Стало — добавляем фиксированную высоту и прокрутку -->
<div style="background:#f8f9ff; min-height:812px; overflow-y:auto; -webkit-overflow-scrolling:touch; position:relative; padding-bottom:150px;">
   
    <!-- Кнопка "Назад" - слева сверху -->
    <div style="position:absolute; top:16px; left:16px; z-index:100; cursor:pointer; font-size:18px; font-weight:600; color:#333;" onclick="window.location.href='main_screen.html'">
        ← Назад
    </div>

    <!-- Шапка с аватаркой и альфиками -->
    <div style="position:absolute; top:46px; left:16px; right:16px; display:flex; align-items:center; justify-content:space-between; z-index:50;">
        <div style="display:flex; align-items:center; gap:12px;">
            <div style="width:44px; height:44px; background:#e86aff; border-radius:50%; display:flex; align-items:center; justify-content:center; color:white; font-weight:bold; font-size:20px;">П</div>
            <span style="font-size:18px; font-weight:600;">Пушик Васек</span>
        </div>
        <div style="display:flex; align-items:center; gap:8px; cursor:pointer; padding:10px; background:rgba(255,255,255,0.8); border-radius:20px;" id="openAlfikiPopup" onclick="document.getElementById('buy-alfiki-popup').style.display='flex'">
            <span style="font-weight:600; font-size:18px;">30</span>
            <img src="Alfiki.png" width="24" height="24">
            <span style="font-size:22px; color:#ff6b35;">+</span>
        </div>
    </div>


    <!-- Прогресс уровня -->
    <div style="position:absolute; top:340px; left:16px; right:16px; cursor:pointer; padding:16px; background:rgba(255,255,255,0.9); border-radius:20px; box-shadow:0 6px 20px rgba(0,0,0,0.1); z-index:30;" id="openLevelPopup" onclick="document.getElementById('level-info-popup').style.display='flex'">
        <div style="display:flex; align-items:center; gap:12px;">
            <span style="font-weight:700; font-size:20px;">Ур.1</span>
            <div style="flex:1; height:14px; background:#e5e5e5; border-radius:7px; overflow:hidden;">
                <div style="width:55%; height:100%; background:linear-gradient(90deg, #7cc47c, #4CAF50); border-radius:7px;"></div>
            </div>
            <span style="font-size:14px; color:#666; font-weight:500;">55/120XP</span>
        </div>
    </div>

    <!-- Задания родителей -->
    <img src="tasks.png" width="340" height="46" onclick="window.location.href='mytasks.html'" 
         style="position:absolute; top:410px; left:16px; border-radius:24px; cursor:pointer; z-index:20;">

<!-- Пушик + речевое облачко — теперь весь блок кликабельный и ведёт в гардероб -->
<div style="position:relative; text-align:center; margin:75px 0; cursor:pointer;" onclick="window.location.href='wardrobe_screen.html'">
    <img src="PUSH.png" width="160" height="241">
    <div style="display:inline-block; background:white; top:170px; left:28%; padding:12px 24px; border-radius:30px; box-shadow:0 4px 15px rgba(0,0,0,0.1); font-size:18px; font-weight:600; margin-bottom:30px;">
        Давай поиграем
    </div>
</div>

   
     <!-- Мини-игры: ДВА ОТДЕЛЬНЫХ РЯДА с горизонтальной прокруткой в каждом -->
    <div style="position:absolute; top:460px; left:0; right:0; padding:0 16px;">
        <!-- Первый ряд -->
        <div style="overflow-x:auto; overflow-y:hidden; -webkit-overflow-scrolling:touch; margin-bottom:1px;">
            <div style="display:inline-flex; gap:15px; padding:10px 0;">
                <img src="fin quiz.png"      width="150" height="123" class="mini-game" data-name="Финансовый квиз"   data-desc="Отвечай на вопросы про деньги!" onclick="document.getElementById('quiz-popup').style.display='flex'">
                <img src="tower.png"         width="150" height="123" class="mini-game" data-name="Построй башню"     data-desc="Строй самую высокую башню!" onclick="document.getElementById('tower-popup').style.display='flex'">
                <img src="block blust.png"   width="150" height="123" class="mini-game" data-name="Block Blust"       data-desc="Взрывай блоки!" onclick="document.getElementById('blust-popup').style.display='flex'">
                <img src="3-in-a-row.png"    width="150" height="123" class="mini-game" data-name="3 в ряд"           data-desc="Собирай конфетки!" onclick="document.getElementById('3inarow-popup').style.display='flex'">
                <!-- если добавишь ещё — будет листаться этот ряд -->
            </div>
        </div>
        <!-- Второй ряд -->
        <div style="overflow-x:auto; overflow-y:hidden; -webkit-overflow-scrolling:touch;">
            <div style="display:inline-flex; gap:15px; padding:10px 0;">
                <img src="tetris.png"        width="150" height="123" class="mini-game" data-name="Тетрис"           data-desc="Собирай линии!" onclick="document.getElementById('tetris-popup').style.display='flex'">
                <img src="flying bird.png"   width="150" height="123" class="mini-game" data-name="Flying bird"       data-desc="Лети между трубами!" onclick="document.getElementById('bird-popup').style.display='flex'">
                <img src="chess.png"         width="150" height="123" class="mini-game" data-name="Шахматы"           data-desc="Развивай мышление!" onclick="document.getElementById('chess-popup').style.display='flex'">
                <img src="tic-toe.png"       width="150" height="123" class="mini-game" data-name="Крестики-нолики"   data-desc="Классика на двоих!" onclick="document.getElementById('tic-toe-popup').style.display='flex'">
                <!-- сюда тоже можно добавлять новые игры -->
            </div>
        </div>

    </div>

    <!-- Видео-уроки -->
    <img src="video-lessons.png" width="340" height="46" onclick="window.location.href='video-lessons_screen.html'" 
         style="position:absolute; top:760px; left:16px; border-radius:24px; cursor:pointer; z-index:30;">


       
        <!-- Пустое место внизу — чтобы можно было проскроллить свинку вверх -->
        <div style="height: 300px;"></div>

    </div>

   

    <!-- Нижняя навигация -->
   <!-- Нижняя навигация — надписи под иконками -->
<div class="nav">
    <div class="nav-item active" data-screen="main-screen">
        <img src="home (main).png" alt="Главная">
        <span class="nav-label">Главный</span>
    </div>
    <div class="nav-item" onclick="document.getElementById('comingSoonOverlay').style.display='flex'">
        <img src="history.png" alt="История">
        <span class="nav-label">История</span>
    </div>
    <div class="nav-item" onclick="document.getElementById('comingSoonOverlay').style.display='flex'">
        <img src="payments.png" alt="Платежи">
        <span class="nav-label">Платежи</span>
    </div>
    <div class="nav-item" onclick="document.getElementById('comingSoonOverlay').style.display='flex'">
        <img src="chats.png" alt="Чаты">
        <span class="nav-label">Чаты</span>
    </div>
</div> 

   
<!-- Попапы -->
   <!-- Попап: Информация об уровне -->
<div class="overlay" id="level-info-popup">
  <div class="popup">
    <h2>На 2 уровне ты получишь:</h2>
    <p>• 5 альфиков<br>• Новые футболки для Пушика</p>
    <button class="close-popup" onclick="closeOverlay('level-info-popup')">Понятно</button>
  </div>
</div>

<!-- Поп-ап покупки альфиков -->
<div class="overlay" id="buy-alfiki-popup">
  <div class="popup">
    <h2>Купить альфики</h2>
    <button class="close-popup" style="background:#ff4b5f;" onclick="buyAlfiki(15,60)">15 альфиков — 60 ₽</button>
    <button class="close-popup" style="background:#ff4b5f;" onclick="buyAlfiki(30,99)">30 альфиков — 99 ₽</button>
    <button class="close-popup" style="background:#ff4b5f;" onclick="buyAlfiki(45,149)">45 альфиков — 149 ₽</button>
    <button class="close-popup" style="background:#ff4b5f;" onclick="buyAlfiki(75,199)">75 альфиков — 199 ₽</button>
    <button class="close-popup" onclick="closeOverlay('buy-alfiki-popup')">Закрыть</button>
  </div>
</div>


<!-- Поп-ап "Проверить знания в квизе" — точь-в-точь как на твоей фотке -->
<div class="overlay" id="quiz-popup">
  <div style="background:white; width:320px; border-radius:28px; padding:32px 24px 28px; text-align:center; box-shadow:0 20px 40px rgba(0,0,0,0.25); position:relative;">
    <!-- Белая плашка с текстом -->
    <p style="font-size:19px; font-weight:700; color:#333; line-height:1.4; margin-bottom:28px;"> Проверь свою финансовую<br>грамотность!
    </p>
    <div style="position:relative; display:inline-block; cursor:pointer;" 
         onclick="document.getElementById('dev-popup').classList.add('visible')">
      <div style="width:0; height:0; border-top: 50px solid transparent; border-bottom: 50px solid transparent; border-left: 115px solid #ff3b30;  margin:0 auto;">  </div>
      <!-- Надпись "Играть" внутри треугольника -->
      <div style="position:absolute; top:50%; left:7px; transform:translateY(-50%); color:white; font-size:24px; font-weight:800; text-shadow:0 2px 6px rgba(0,0,0,0.4); pointer-events:none;"> Играть </div>
    </div>
     
  </div>
</div>

<!-- Поп-ап "тетрис" — точь-в-точь как на твоей фотке -->
<div class="overlay" id="tetris-popup">
  <div style="background:white; width:320px; border-radius:28px; padding:32px 24px 28px; text-align:center; box-shadow:0 20px 40px rgba(0,0,0,0.25); position:relative;">
    <!-- Белая плашка с текстом -->
    <p style="font-size:19px; font-weight:700; color:#333; line-height:1.4; margin-bottom:28px;">Собери как можно больше рядов,<br>чтобы поменять образ Пушику!
    </p>
    <div style="position:relative; display:inline-block; cursor:pointer;" 
         onclick="document.getElementById('dev-popup').classList.add('visible')">
      <div style="width:0; height:0; border-top: 50px solid transparent; border-bottom: 50px solid transparent; border-left: 115px solid #ff3b30;  margin:0 auto;">  </div>
      <!-- Надпись "Играть" внутри треугольника -->
      <div style="position:absolute; top:50%; left:7px; transform:translateY(-50%); color:white; font-size:24px; font-weight:800; text-shadow:0 2px 6px rgba(0,0,0,0.4); pointer-events:none;"> Играть </div>
    </div>
  </div>
</div>

<!-- Поп-ап "шахматы" — точь-в-точь как на твоей фотке -->
<div class="overlay" id="chess-popup">
  <div style="background:white; width:320px; border-radius:28px; padding:32px 24px 28px; text-align:center; box-shadow:0 20px 40px rgba(0,0,0,0.25); position:relative;">
    <!-- Белая плашка с текстом -->
    <p style="font-size:19px; font-weight:700; color:#333; line-height:1.4; margin-bottom:28px;">Проверь свою тактическую<br>смекалку!</p>
    <div style="position:relative; display:inline-block; cursor:pointer;" 
         onclick="document.getElementById('dev-popup').classList.add('visible')">
      <div style="width:0; height:0; border-top: 50px solid transparent; border-bottom: 50px solid transparent; border-left: 115px solid #ff3b30;  margin:0 auto;">  </div>
      <!-- Надпись "Играть" внутри треугольника -->
      <div style="position:absolute; top:50%; left:7px; transform:translateY(-50%); color:white; font-size:24px; font-weight:800; text-shadow:0 2px 6px rgba(0,0,0,0.4); pointer-events:none;"> Играть </div>
    </div>
  </div>
</div>

   <!-- Поп-ап "крестики-нолики" — точь-в-точь как на твоей фотке -->
<div class="overlay" id="tic-toe-popup">
  <div style="background:white; width:320px; border-radius:28px; padding:32px 24px 28px; text-align:center; box-shadow:0 20px 40px rgba(0,0,0,0.25); position:relative;">
    <!-- Белая плашка с текстом -->
    <p style="font-size:19px; font-weight:700; color:#333; line-height:1.4; margin-bottom:28px;">Испытай свою стратегию в<br>каждой клетке!</p>
    <div style="position:relative; display:inline-block; cursor:pointer;" 
         onclick="document.getElementById('dev-popup').classList.add('visible')">
      <div style="width:0; height:0; border-top: 50px solid transparent; border-bottom: 50px solid transparent; border-left: 115px solid #ff3b30;  margin:0 auto;">  </div>
      <!-- Надпись "Играть" внутри треугольника -->
      <div style="position:absolute; top:50%; left:7px; transform:translateY(-50%); color:white; font-size:24px; font-weight:800; text-shadow:0 2px 6px rgba(0,0,0,0.4); pointer-events:none;"> Играть </div>
    </div>
  </div>
</div>

      <!-- Поп-ап "башня" — точь-в-точь как на твоей фотке -->
<div class="overlay" id="tower-popup">
  <div style="background:white; width:320px; border-radius:28px; padding:32px 24px 28px; text-align:center; box-shadow:0 20px 40px rgba(0,0,0,0.25); position:relative;">
    <!-- Белая плашка с текстом -->
    <p style="font-size:19px; font-weight:700; color:#333; line-height:1.4; margin-bottom:28px;">Покажи свою молниеносную<br>реакцию!</p>
    <div style="position:relative; display:inline-block; cursor:pointer;" 
         onclick="document.getElementById('dev-popup').classList.add('visible')">
      <div style="width:0; height:0; border-top: 50px solid transparent; border-bottom: 50px solid transparent; border-left: 115px solid #ff3b30;  margin:0 auto;">  </div>
      <!-- Надпись "Играть" внутри треугольника -->
      <div style="position:absolute; top:50%; left:7px; transform:translateY(-50%); color:white; font-size:24px; font-weight:800; text-shadow:0 2px 6px rgba(0,0,0,0.4); pointer-events:none;"> Играть </div>
    </div>
  </div>
</div>

      <!-- Поп-ап "3 в ряд" — точь-в-точь как на твоей фотке -->
<div class="overlay" id="3inarow-popup">
  <div style="background:white; width:320px; border-radius:28px; padding:32px 24px 28px; text-align:center; box-shadow:0 20px 40px rgba(0,0,0,0.25); position:relative;">
    <!-- Белая плашка с текстом -->
    <p style="font-size:19px; font-weight:700; color:#333; line-height:1.4; margin-bottom:28px;">Сочетай, свайпай и <br>побеждай!</p>
    <div style="position:relative; display:inline-block; cursor:pointer;" 
         onclick="document.getElementById('dev-popup').classList.add('visible')">
      <div style="width:0; height:0; border-top: 50px solid transparent; border-bottom: 50px solid transparent; border-left: 115px solid #ff3b30;  margin:0 auto;">  </div>
      <!-- Надпись "Играть" внутри треугольника -->
      <div style="position:absolute; top:50%; left:7px; transform:translateY(-50%); color:white; font-size:24px; font-weight:800; text-shadow:0 2px 6px rgba(0,0,0,0.4); pointer-events:none;"> Играть </div>
    </div>
  </div>
</div>

      <!-- Поп-ап "block blust" — точь-в-точь как на твоей фотке -->
<div class="overlay" id="blust-popup">
  <div style="background:white; width:320px; border-radius:28px; padding:32px 24px 28px; text-align:center; box-shadow:0 20px 40px rgba(0,0,0,0.25); position:relative;">
    <!-- Белая плашка с текстом -->
    <p style="font-size:19px; font-weight:700; color:#333; line-height:1.4; margin-bottom:28px;">Реагируй мгновенно – <br>уничтожай блоки цепями!</p>
    <div style="position:relative; display:inline-block; cursor:pointer;" 
         onclick="document.getElementById('dev-popup').classList.add('visible')">
      <div style="width:0; height:0; border-top: 50px solid transparent; border-bottom: 50px solid transparent; border-left: 115px solid #ff3b30;  margin:0 auto;">  </div>
      <!-- Надпись "Играть" внутри треугольника -->
      <div style="position:absolute; top:50%; left:7px; transform:translateY(-50%); color:white; font-size:24px; font-weight:800; text-shadow:0 2px 6px rgba(0,0,0,0.4); pointer-events:none;"> Играть </div>
    </div>
  </div>
</div>

      <!-- Поп-ап "flying bird" — точь-в-точь как на твоей фотке -->
<div class="overlay" id="bird-popup">
  <div style="background:white; width:320px; border-radius:28px; padding:32px 24px 28px; text-align:center; box-shadow:0 20px 40px rgba(0,0,0,0.25); position:relative;">
    <!-- Белая плашка с текстом -->
    <p style="font-size:19px; font-weight:700; color:#333; line-height:1.4; margin-bottom:28px;">Лети, уворачивайся, держи<br>ритм!</p>
    <div style="position:relative; display:inline-block; cursor:pointer;" 
         onclick="document.getElementById('dev-popup').classList.add('visible')">
      <div style="width:0; height:0; border-top: 50px solid transparent; border-bottom: 50px solid transparent; border-left: 115px solid #ff3b30;  margin:0 auto;">  </div>
      <!-- Надпись "Играть" внутри треугольника -->
      <div style="position:absolute; top:50%; left:7px; transform:translateY(-50%); color:white; font-size:24px; font-weight:800; text-shadow:0 2px 6px rgba(0,0,0,0.4); pointer-events:none;"> Играть </div>
    </div>
  </div>
</div>
   
   
  <!-- Поп-ап "Игра в разработке" -->
<div class="overlay" id="dev-popup">
  <div style="background:white; padding:32px 24px; border-radius:28px; text-align:center; box-shadow:0 20px 40px rgba(0,0,0,0.3);">
    <h3 style="font-size:19px; font-weight:700; margin-bottom:12px; color:#333;">
      Игра в разработке...
    </h3>
    <button style="background:#ff4b5f; color:white; border:none; padding:12px 40px; border-radius:30px; font-size:16px; font-weight:600; cursor:pointer;"
            onclick="document.getElementById('dev-popup').classList.remove('visible')">  Понятно
    </button>
  </div>
</div>






   
<!-- Попап-заглушка "Пока в разработке" -->
<div class="overlay" id="comingSoonOverlay">
    <div class="popup">
        <h2>Функция в разработке </h2>
        <p>Следи за обновлениями!</p>
        <button class="close-popup" onclick="closeOverlay('comingSoonOverlay')">Понятно</button>
    </div>
</div>



   
<script>
// LocalStorage
let userData = JSON.parse(localStorage.getItem('plushikUser'));
if (!userData) {
  userData = { name: "Александра", balance: 6000, alfiki: 30 };
  localStorage.setItem('plushikUser', JSON.stringify(userData));
}
   // Обновляем число альфиков на экране при загрузке
const alfikiDisplay = document.querySelector('#openAlfikiPopup span:first-child');
if (alfikiDisplay) alfikiDisplay.textContent = userData.alfiki;
   
   function buyAlfiki(count, price) {
  let data = JSON.parse(localStorage.getItem('plushikUser')) || { balance: 6000, alfiki: 30 };
  if (data.balance >= price) {
    data.balance -= price;
    data.alfiki += count;
    localStorage.setItem('plushikUser', JSON.stringify(data));
     document.querySelector('#openAlfikiPopup span').textContent = data.alfiki;
    alert(`Куплено ${count} альфиков! Осталось: ${data.balance} ₽`);
     } else {
    alert('Недостаточно денег!');
  }
  closeOverlay('buy-alfiki-popup');
}
   
// Клик по кнопкам
document.getElementById('openPiggyPopup').addEventListener('click', () => document.getElementById('piggyOverlay').style.display = 'flex');
document.getElementById('openInstruction').addEventListener('click', () => document.getElementById('instructionOverlay').style.display = 'flex');
document.getElementById('openLostCard').addEventListener('click', () => document.getElementById('lostCardOverlay').style.display = 'flex');

function closeOverlay(id) { document.getElementById(id).style.display = 'none'; }
document.querySelectorAll('.overlay').forEach(ov => ov.addEventListener('click', e => { if (e.target === ov) ov.style.display = 'none'; }));
   // Открытие попапа уровня
document.getElementById('openLevelPopup')?.addEventListener('click', () => {
    document.getElementById('levelOverlay').style.display = 'flex';
});
// Закрытие любого поп-апа кликом по тёмному фону
document.querySelectorAll('.overlay').forEach(overlay => {
  overlay.addEventListener('click', function(e) {
    if (e.target === overlay) {
      overlay.style.display = 'none';
    }
  });
});
   

</script>
</body>
</html>
