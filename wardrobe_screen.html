<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Гардероб Пушика</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --bg-main: #f5f5f8;
      --topbar-bg: #ffffff;
      --pill-bg: #f3d8cf;
      --accent-red: #ff4b5f;
      --text-main: #111111;
      --overlay-bg: rgba(0, 0, 0, 0.45);
      --tooltip-bg: #ffffff;
      --tooltip-text: #333333;
      --shadow-soft: 0 8px 24px rgba(0, 0, 0, 0.12);
      --radius-big: 24px;
      --transition-fast: 0.18s ease-out;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html, body { height: 100%; }
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: var(--bg-main);
      color: var(--text-main);
      display: flex;
      justify-content: center;
      align-items: stretch;
    }
    .app-shell {
      position: relative;
      width: 100%;
      max-width: 375px;
      min-height: 100vh;
      background: var(--bg-main);
      display: flex;
      flex-direction: column;
    }
    /* TOP BAR */
    .top-bar {
      position: sticky; top: 0; z-index: 20; height: 64px; background: var(--topbar-bg);
      display: flex; align-items: center; justify-content: space-between; padding: 0 16px;
      border-bottom: 1px solid #e3e3eb;
    }
    .btn { border: none; background: none; padding: 6px 10px; border-radius: 999px; cursor: pointer; }
    .btn-back { background: #f2f2f7; padding: 10px 14px; }
    .icon-back { width: 16px; height: 16px; border-left: 2px solid #111; border-bottom: 2px solid #111; transform: rotate(45deg); }
    .icon-hanger { position: relative; width: 18px; height: 18px; }
    .icon-hanger::before { content: ""; position: absolute; width: 12px; height: 12px; border-radius: 50%; border: 2px solid #111; border-right-color: transparent; border-bottom-color: transparent; top: 0; left: 3px; transform: rotate(-35deg); }
    .icon-hanger::after { content: ""; position: absolute; bottom: 1px; left: 2px; right: 2px; height: 2px; background: #111; border-radius: 999px; }

    /* ГЛАВНЫЙ КОНТЕНТ */
    .content { flex: 1; padding: 16px 16px 80px; display: flex; justify-content: center; align-items: flex-start; }
    .wardrobe-wrapper {
      position: relative;
      width: 375px;
      height: 518px;
      margin: 0 auto;
      border-radius: var(--radius-big);
      box-shadow: var(--shadow-soft);
      overflow: hidden;
      background: #f5f5f8;
    }
    .wardrobe-bg {
      position: absolute;
      inset: 0;
      background: url('wardrobe_full.png') center/contain no-repeat;
      pointer-events: none;
    }
    #pushik-container {
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      pointer-events: none;
    }
    #pushik-img {
      width: 52%;
      max-width: 210px;
      border-radius: 24px;
      transition: transform 0.22s cubic-bezier(0.22, 1.4, 0.36, 1), box-shadow 0.22s ease-out;
    }
    #pushik-img.bouncy {
      transform: translateY(-4px) scale(1.04);
      box-shadow: 0 18px 32px rgba(0,0,0,0.35);
    }

    /* Точки одежды */
    .hotspot {
      position: absolute; width: 22px; height: 22px; background: white; border-radius: 50%;
      box-shadow: 0 4px 10px rgba(0,0,0,0.22); cursor: pointer; z-index: 5;
    }
    .hotspot-1 { left: 10%; top: 10%; }
    .hotspot-2 { left: 10%; top: 45%; }
    .hotspot-3 { left: 10%; top: 70%; }

    .tooltip {
  position: absolute;
  right: 155px;           /* прижимает надпись слева от круглешка */
  top: 50%;
  transform: translateY(-50%);  /* центрирует по вертикали */
  max-width: 195px;
  padding: 10px 14px;
  border-radius: 16px;
  background: white;
  color: #333;
  font-size: 13px;
  font-weight: 500;
  box-shadow: 0 6px 20px rgba(0,0,0,0.18);
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.2s ease;
  z-index: 10;
  white-space: nowrap;
}

.tooltip.visible {
  opacity: 1;
}

/* Маленькая стрелочка, указывающая на круглешек */
.tooltip::after {
  content: "";
  position: absolute;
  left: 100%;
  top: 50%;
  transform: translateY(-50%);
  border: 8px solid transparent;
  border-left-color: white;
}
    /* Панель образа */
    .outfit-panel {
      position: absolute; left: 50%; bottom: 8%; transform: translateX(-50%); text-align: center; z-index: 10;
    }
    .outfit-label {
      font-size: 11px; color: rgba(0,0,0,0.72); background: rgba(255,255,255,0.7); padding: 3px 10px; border-radius: 999px; backdrop-filter: blur(6px);
    }
    .btn-outfit {
      margin-top: 6px; padding: 6px 14px; background: white; color: #a12130; border: none; border-radius: 999px;
      font-size: 12px; font-weight: 500; cursor: pointer; box-shadow: 0 6px 14px rgba(0,0,0,0.18);
    }

    /* Нижняя плашка */
    .bottom-bar { position: fixed; left: 0; right: 0; bottom: 18px; display: flex; justify-content: center; z-index: 15; }
    .alpha-pill {
      display: flex; align-items: center; gap: 10px; padding: 6px 14px; background: var(--pill-bg);
      border-radius: 999px; box-shadow: 0 6px 14px rgba(0,0,0,0.18); font-size: 14px; font-weight: 500;
    }
    .alpha-pill-plus { width: 22px; height: 22px; border-radius: 50%; border: 1px solid rgba(0,0,0,0.25); display: flex; align-items: center; justify-content: center; cursor: pointer; }

    /* Модалка */
    .modal-overlay {
      position: fixed; inset: 0; background: var(--overlay-bg); display: flex; justify-content: center; align-items: center;
      opacity: 0; pointer-events: none; transition: opacity .18s; z-index: 40;
    }
    .modal-overlay.visible { opacity: 1; pointer-events: auto; }
    .modal-card { width: 86%; max-width: 320px; background: white; border-radius: 22px; padding: 20px 18px 16px; text-align: center; }
    .btn-close-modal { padding: 8px 24px; background: var(--accent-red); color: white; border: none; border-radius: 999px; cursor: pointer; }

     /* Попапы */
    .overlay {
        position: fixed;
        top: 0; left: 0; right: 0; bottom: 0;
        background: rgba(0,0,0,0.65);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 200;
    }
    .popup {
        background: white;
        border-radius: 24px;
        padding: 32px 24px;
        text-align: center;
        max-width: 320px;
        box-shadow: 0 20px 40px rgba(0,0,0,0.2);
    }
    .popup h2 { margin-bottom: 16px; font-size: 22px; }
    .close-popup {
        margin-top: 24px;
        padding: 12px 40px;
        background: #ff5c8a;
        color: white;
        border: none;
        border-radius: 30px;
        font-size: 16px;
        cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="app-shell">
    <header class="top-bar">
      <div class="top-bar-left">
        <button class="btn btn-back" id="btn-back"> ←Назад </button>
      </div>
      <div class="top-bar-right">
        <button class="btn" id="btn-hanger">$</button>
      </div>
    </header>

    <main class="content">
      <div class="wardrobe-wrapper" id="wardrobe">
        <!-- Фон шкафа -->
        <div class="wardrobe-bg"></div>

        <!-- Пушик (плоская PNG) -->
        <div id="pushik-container">
          <img id="pushik-img" src="PUSH.png" alt="Пушик">
        </div>

        <!-- Кликабельные точки -->
        <button class="hotspot hotspot-1" data-tooltip-id="tooltip-1"></button>
        <button class="hotspot hotspot-2" data-tooltip-id="tooltip-2"></button>
        <button class="hotspot hotspot-3" data-tooltip-id="tooltip-3"></button>

        <!-- Подсказки -->
        <div id="tooltip-1" class="tooltip">Скоро будем тебя ждать! <br> Головные уборы будут <br> доступны с 5 уровня.</div>
        <div id="tooltip-2" class="tooltip">Скоро будем тебя ждать! <br> Одежда будет доступна <br> с 10 уровня.</div>
        <div id="tooltip-3" class="tooltip">Скоро будем тебя ждать! <br> Обувь будет доступна <br> с 17 уровня.</div>

        <!-- Смена образа -->
        <div class="outfit-panel">
          <div class="outfit-label" id="outfit-label">Образ: базовый</div>
          <button class="btn-outfit" id="btn-outfit">Сменить образ</button>
        </div>
      </div>
    </main>


  <!-- Модалка -->
  <div class="modal-overlay" id="modal-overlay">
    <div class="modal-card">
      <div class="modal-text">Пора закупиться! Ждём, пока ты достигнешь уровня 5 и сможешь покупать вещи для Пушика.</div>
      <div class="modal-footer"><button class="btn-close-modal" id="btn-close-modal">Закрыть</button></div>
    </div>
  </div>

  <!-- Кнопка альфиков — новая позиция и размер -->
<div style="position:absolute; left:auto; right:auto; bottom:69px; top:695px; display:flex; align-items:center; justify-content:center; gap:12px; cursor:pointer; padding:14px; background:rgba(255,255,255,0.9); border-radius:24px; box-shadow:0 8px 20px rgba(0,0,0,0.15); z-index:50;" 
     id="openAlfikiPopupNew" onclick="document.getElementById('buy-alfiki-popup').style.display='flex'">
  
  <span style="font-weight:700; font-size:22px; color:#333;" id="alfikiCount">30</span>
  <img src="Alfiki.png" width="32" height="32">
  <span style="font-size:28px; color:#ff6b35; font-weight:bold;">+</span>
</div>

  <!-- Поп-ап покупки альфиков (тот же, что и на других экранах) -->
<div class="overlay" id="buy-alfiki-popup">
  <div class="popup">
    <h2>Купить альфики</h2>
    <button class="close-popup" style="background:#ff4b5f;" onclick="buyAlfiki(15,60)">15 альфиков — 60 ₽</button>
    <button class="close-popup" style="background:#ff4b5f;" onclick="buyAlfiki(30,99)">30 альфиков — 99 ₽</button>
    <button class="close-popup" style="background:#ff4b5f;" onclick="buyAlfiki(45,149)">45 альфиков — 149 ₽</button>
    <button class="close-popup" style="background:#ff4b5f;" onclick="buyAlfiki(75,199)">75 альфиков — 199 ₽</button>
    <button class="close-popup" onclick="closeOverlay('buy-alfiki-popup')">Закрыть</button>
  </div>
</div>
  
  <script>
    // LocalStorage — общее для всех экранов
let userData = JSON.parse(localStorage.getItem('plushikUser'));
if (!userData) {
  userData = { name: "Александра", balance: 6000, alfiki: 30 };
  localStorage.setItem('plushikUser', JSON.stringify(userData));
}

// Обновляем число альфиков на этом экране при загрузке
const alfikiDisplayNew = document.getElementById('alfikiCount');
if (alfikiDisplayNew) alfikiDisplayNew.textContent = userData.alfiki;

// Функция покупки (та же, что и на других экранах)
function buyAlfiki(count, price) {
  let data = JSON.parse(localStorage.getItem('plushikUser')) || { balance: 6000, alfiki: 30 };
  if (data.balance >= price) {
    data.balance -= price;
    data.alfiki += count;
    localStorage.setItem('plushikUser', JSON.stringify(data));
    
    // Обновляем на ЭТОМ экране
    if (alfikiDisplayNew) alfikiDisplayNew.textContent = data.alfiki;
    
    alert(`Куплено ${count} альфиков! Осталось: ${data.balance} ₽`);
  } else {
    alert('Недостаточно денег!');
  }
  closeOverlay('buy-alfiki-popup');
}
    
    document.addEventListener("DOMContentLoaded", () => {
      const backBtn = document.getElementById("btn-back");
      const hangerBtn = document.getElementById("btn-hanger");
      const modal = document.getElementById("modal-overlay");
      const pushikImg = document.getElementById("pushik-img");
      const outfitLabel = document.getElementById("outfit-label");

      // Образы (просто меняем PNG)
      const outfits = [
        { name: "базовый", src: "PUSH.png" },
        { name: "в кепке", src: "pushik_cap.png" },
        { name: "в свитере", src: "pushik_bank.png" },
        { name: "в кедах", src: "pushik_kedy.png" }
      ];
      let current = 0;

      document.getElementById("btn-outfit").onclick = () => {
        current = (current + 1) % outfits.length;
        pushikImg.src = outfits[current].src;
        outfitLabel.textContent = "Образ: " + outfits[current].name;
        pushikImg.classList.add("bouncy");
        setTimeout(() => pushikImg.classList.remove("bouncy"), 220);
      };

      // Остальные кнопки
      backBtn.onclick = () => history.back();
      hangerBtn.onclick = () => modal.classList.add("visible");
      document.getElementById("btn-close-modal").onclick = () => modal.classList.remove("visible");
      document.getElementById("alpha-plus").onclick = () => alert("Магазин альфиков скоро!");

      // Подсказки на точках
      document.querySelectorAll(".hotspot").forEach(hot => {
        hot.onclick = (e) => {
          e.stopPropagation();
          const tip = document.getElementById(hot.dataset.tooltipId);
          document.querySelectorAll(".tooltip").forEach(t => t.classList.remove("visible"));
          tip.classList.add("visible");
        };
      });
      document.addEventListener("click", () => document.querySelectorAll(".tooltip").forEach(t => t.classList.remove("visible")));
    });
  </script>
</body>
</html>
